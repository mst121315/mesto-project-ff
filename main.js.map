{"version":3,"file":"main.js","mappings":"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","sources":["webpack://mesto-project-ff/./src/components/card.js","webpack://mesto-project-ff/./src/components/modal.js","webpack://mesto-project-ff/./src/components/validation.js","webpack://mesto-project-ff/./src/components/api.js","webpack://mesto-project-ff/./src/index.js"],"sourcesContent":["function createCard(\r\n  element,\r\n  cardTemplate,\r\n  zoom,\r\n  myId,\r\n  processLike,\r\n  processDelete\r\n) {\r\n  const cardElement = cardTemplate.querySelector(\".places__item\").cloneNode(true);\r\n  const imageElement = cardElement.querySelector(\".card__image\");\r\n  const likeCountElement = cardElement.querySelector(\".like-count\");\r\n\r\n  likeCountElement.textContent = element.likes.length;\r\n  imageElement.src = element.link;\r\n  imageElement.alt = element.name;\r\n  const cardId = element._id;\r\n\r\n  const cardTitle = cardElement.querySelector(\".card__title\");\r\n  cardTitle.textContent = element.name;\r\n\r\n  const deleteButton = cardElement.querySelector(\".card__delete-button\");\r\n  if (element.owner._id == myId) {\r\n    deleteButton.addEventListener(\"click\", () =>\r\n      deleteCard(cardElement, deleteButton, processDelete)\r\n    );\r\n    deleteButton.dataset.cartId = cardId;\r\n  } else {\r\n    deleteButton.remove();\r\n  }\r\n\r\n  const likeButton = cardElement.querySelector(\".card__like-button\"); // лайк\r\n  likeButton.dataset.cartId = cardId;\r\n  likeButton.addEventListener(\"click\", () =>\r\n    handleLike(likeButton, processLike, likeCountElement)\r\n  );\r\n  if (element.likes.some((user) => user._id === myId)) {\r\n    likeButton.classList.add(\"card__like-button_is-active\");\r\n  }\r\n\r\n  imageElement.addEventListener(\"click\", () => zoom(element)); // zoom\r\n\r\n  return cardElement;\r\n}\r\n\r\nfunction deleteCard(cardElement, deleteButton, processDelete) {\r\n  cardElement.remove();\r\n  processDelete(deleteButton.dataset.cartId);\r\n}\r\n\r\nfunction handleLike(likeButton, processLike, likeCountElement) {\r\n  likeButton.classList.toggle(\"card__like-button_is-active\");\r\n  processLike(\r\n    likeButton.classList.contains(\"card__like-button_is-active\"),\r\n    likeButton.dataset.cartId\r\n  ).then((element) => {\r\n    likeCountElement.textContent = element.likes.length;\r\n  });\r\n}\r\n\r\nexport { createCard };\r\n","/**\r\n * функция открытия попапа новой карточки\r\n */\r\nfunction openPopup(popup) {\r\n  popup.classList.add(\"popup_is-opened\");\r\n  popup.classList.add(\"popup_is-animated\");\r\n\r\n  document.addEventListener(\"keydown\", closePopupEsc);\r\n  popup.addEventListener(\"click\", handleClosePopup);\r\n}\r\n\r\n/**\r\n * колбэк функция закрытия попапа \r\n */\r\nfunction closePopup(popup) {\r\n  popup.classList.remove(\"popup_is-opened\");\r\n  popup.classList.remove(\"popup_is-animated\");\r\n\r\n  document.removeEventListener(\"keydown\", closePopupEsc);\r\n  popup.removeEventListener(\"click\", handleClosePopup);\r\n}\r\n\r\n/**\r\n * закрытие кнопкой Esc\r\n */\r\nfunction closePopupEsc(evt) {\r\n  if (evt.key === \"Escape\") {\r\n    const popup = document.querySelector(\".popup_is-opened\");\r\n    if (popup) {\r\n      closePopup(popup);\r\n    }\r\n  }\r\n}\r\n\r\nfunction handleClosePopup(evt) {\r\n  if (evt.target.classList.contains(\"popup\")) {\r\n    /** закрытие по оверлею */ \r\n    closePopup(evt.target);\r\n  }\r\n  if (evt.target.classList.contains(\"popup__close\")) {\r\n    /** закрытие по крестику */\r\n    closePopup(evt.target.closest(\".popup\"));\r\n  }\r\n}\r\n\r\nexport { openPopup };\r\nexport { closePopup };\r\n","const pattern = /^[A-Za-zА-Яа-яЁё \\-]+$/;\r\nlet config = {};\r\n\r\nfunction setEventListeners(formElement) {\r\n  const popupInputs = formElement.querySelectorAll(config.inputSelector);\r\n\r\n  popupInputs.forEach((inputElement) => {\r\n    inputElement.addEventListener(\"input\", function () {\r\n      checkInputValidity(formElement, inputElement);\r\n    });\r\n  });\r\n}\r\n\r\nfunction checkInputValidity(formElement, inputElement) {\r\n  const button = formElement.querySelector(config.submitButtonSelector);\r\n  button.disabled = false;\r\n  button.classList.remove(config.inactiveButtonClass);\r\n  const isValid = isInputValid(inputElement);\r\n  if (!isValid) {\r\n    button.classList.add(config.inactiveButtonClass);\r\n    button.disabled = true;\r\n  }\r\n}\r\n\r\nfunction isInputValid(inputElement) {\r\n  setValidationMessage(inputElement, \"\");\r\n  let isValid = false;\r\n  if (!inputElement.validity.valid) {\r\n    setValidationMessage(inputElement, inputElement.validationMessage);\r\n  } else if (\r\n    inputElement.dataset.validateSymbols &&\r\n    !pattern.test(inputElement.value)\r\n  ) {\r\n    setValidationMessage(inputElement, inputElement.dataset.errorMessage);\r\n  } else {\r\n    isValid = true;\r\n  }\r\n\r\n  return isValid;\r\n}\r\n\r\nfunction setValidationMessage(inputElement, message) {\r\n  const span = inputElement.nextElementSibling;\r\n  if (message) {\r\n    span.classList.add(config.errorClass);\r\n    inputElement.classList.add(config.inputErrorClass);\r\n  } else {\r\n    inputElement.classList.remove(config.inputErrorClass);\r\n  }\r\n  span.textContent = message;\r\n}\r\n\r\nexport function enableValidation(validationConfig) {\r\n  /** включение валидации всех форм */\r\n  config = validationConfig;\r\n  const popupForms = document.querySelectorAll(config.formSelector);\r\n\r\n  popupForms.forEach((formElement) => {\r\n    setEventListeners(formElement);\r\n  });\r\n}\r\n\r\nexport function clearValidation(formElement, validationConfig) {\r\n  /** очищает ошибки валидации формы и делает кнопку неактивной */\r\n  const button = formElement.querySelector(\r\n    validationConfig.submitButtonSelector\r\n  );\r\n  button.disabled = true;\r\n  button.classList.add(config.inactiveButtonClass);\r\n  const spanElements = Array.from(\r\n    formElement.getElementsByClassName(validationConfig.errorClass)\r\n  );\r\n  spanElements.forEach((span) => {\r\n    span.textContent = \"\";\r\n    span.classList.remove(validationConfig.errorClass);\r\n  });\r\n}\r\n","const config = {\r\n  baseUrl: \"https://nomoreparties.co/v1/wff-cohort-36\",\r\n  headers: {\r\n    authorization: \"85ed03d0-3030-4aec-8d2c-4308658bc7d8\",\r\n    \"Content-Type\": \"application/json\",\r\n  },\r\n};\r\n\r\nfunction processResponse(res) {\r\n    if (res.ok) {\r\n      return res.json();\r\n    }\r\n    return Promise.reject(`Ошибка: ${res.status}`);\r\n}\r\n\r\nexport const getInitialCards = () => {\r\n  return fetch(`${config.baseUrl}/cards`, {\r\n    headers: config.headers,\r\n  }).then((res) => processResponse(res));\r\n};\r\n\r\nexport const getProfile = () => {\r\n  return fetch(`${config.baseUrl}/users/me`, {\r\n    method: \"GET\",\r\n    headers: config.headers,\r\n  }).then((res) => processResponse(res));\r\n};\r\n\r\nexport const updateProfile = (name, about) => {\r\n  return fetch(`${config.baseUrl}/users/me`, {\r\n    method: \"PATCH\",\r\n    headers: config.headers,\r\n    body: JSON.stringify({\r\n      name: name,\r\n      about: about,\r\n    }),\r\n  }).then((res) => processResponse(res));\r\n};\r\n\r\nexport const addNewCard = (name, link) => {\r\n  return fetch(`${config.baseUrl}/cards`, {\r\n    method: \"POST\",\r\n    headers: config.headers,\r\n    body: JSON.stringify({\r\n      name: name,\r\n      link: link,\r\n    }),\r\n  }).then((res) => processResponse(res));\r\n};\r\n\r\nexport const processLike = (isLike, cardId) => {\r\n  const method = isLike ? \"PUT\" : \"DELETE\";\r\n  return fetch(`${config.baseUrl}/cards/likes/${cardId}`, {\r\n    method: method,\r\n    headers: config.headers,\r\n  }).then((res) => processResponse(res));\r\n};\r\n\r\nexport const processDelete = (cardId) => {\r\n  return fetch(`${config.baseUrl}/cards/${cardId}`, {\r\n    method: \"DELETE\",\r\n    headers: config.headers,\r\n  }).then((res) => processResponse(res));\r\n};\r\n\r\nexport const updateAvatar = (avatar) => {\r\n  return fetch(`${config.baseUrl}/users/me/avatar`, {\r\n    method: \"PATCH\",\r\n    headers: config.headers,\r\n    body: JSON.stringify({\r\n      avatar: avatar,\r\n    }),\r\n  }).then((res) => processResponse(res));\r\n};\r\n","import \"./pages/index.css\";\r\n\r\nimport { createCard } from \"./components/card.js\";\r\nimport { openPopup } from \"./components/modal.js\";\r\nimport { closePopup } from \"./components/modal.js\";\r\n\r\nimport { clearValidation } from \"./components/validation.js\";\r\nimport { enableValidation } from \"./components/validation.js\";\r\n\r\nimport {\r\n  getInitialCards,\r\n  getProfile,\r\n  updateProfile,\r\n  addNewCard,\r\n  processLike,\r\n  processDelete,\r\n  updateAvatar,\r\n} from \"./components/api.js\";\r\n\r\nlet myId = null;\r\n\r\nconst profileAddButton = document.querySelector(\".profile__add-button\"); // кнопка +\r\nconst editButton = document.querySelector(\".profile__edit-button\"); // кнопка редактировать профиль\r\nconst formEditProfile = document.querySelector(\"#edit-profile-form\");\r\nconst formNewCard = document.querySelector(\"#new-card-form\");\r\n\r\nconst addPopup = document.querySelector(\".popup_type_new-card\"); // попап новой карточки\r\nconst editProfilePopup = document.querySelector(\".popup_type_edit\"); // попап редактирования профиля\r\n\r\nconst cardsContainer = document.querySelector(\".places__list\");\r\n\r\n/** Темплейт карточки */\r\nconst cardTemplate = document.querySelector(\"#card-template\").content;\r\n\r\nconst nameInput = document.querySelector(\".popup__input_type_name\");\r\nconst jobInput = document.querySelector(\".popup__input_type_description\");\r\n\r\nconst popupTypeImage = document.querySelector(\".popup_type_image\");\r\nconst popupImage = popupTypeImage.querySelector(\".popup__image\");\r\nconst popupCaptionImage = popupTypeImage.querySelector(\".popup__caption\");\r\n\r\nconst profileTitle = document.querySelector(\".profile__title\");\r\nconst profileDescription = document.querySelector(\".profile__description\");\r\n\r\nconst profileImage = document.querySelector(\".profile__image\");\r\n\r\nconst newCardName = document.querySelector(\"#place-name\");\r\nconst newCardJob = document.querySelector(\"#link\");\r\n\r\n/** Аватар */ \r\nconst popupTypeAvatar = document.querySelector(\".popup_type_avatar\");\r\nconst buttonProfileAddAvatar = document.querySelector(\".profile__add-avatar\");\r\nconst avatarForm = document.querySelector(\"#avatar-form\");\r\nconst avatarInput = avatarForm.querySelector(\"#avatar-url\");\r\n\r\nconst validationConfig = {\r\n  formSelector: \".popup__form\",\r\n  inputSelector: \".popup__input\",\r\n  submitButtonSelector: \".popup__button\",\r\n  inactiveButtonClass: \"popup__button_disabled\",\r\n  inputErrorClass: \"popup__input_type_error\",\r\n  errorClass: \"popup__error_visible\",\r\n};\r\n\r\n/** \r\n * функция увеличения картинки карточки \r\n */\r\nfunction zoom(element) {\r\n  openPopup(popupTypeImage);\r\n\r\n  popupImage.src = element.link;\r\n  popupImage.alt = element.name;\r\n  popupCaptionImage.textContent = element.name;\r\n}\r\n\r\nfunction sartLoader(el) {\r\n  const button = el.querySelector(\".popup__button\");\r\n  if (button.dataset.processing) {\r\n    button.disabled = true;\r\n    button.dataset.label = button.textContent;\r\n    button.textContent = button.dataset.processing;\r\n  }\r\n}\r\n\r\nfunction stopLoader(el) {\r\n  const button = el.querySelector(\".popup__button\");\r\n  if (button.dataset.processing) {\r\n    button.disabled = false;\r\n    button.dataset.processing = button.textContent;\r\n    button.textContent = button.dataset.label;\r\n  }\r\n}\r\n\r\n/** \r\n * Обработчик «отправки» формы \r\n */\r\nfunction handleFormSubmitEditProfile(evt) {\r\n  evt.preventDefault();\r\n  sartLoader(evt.target);\r\n  updateProfile(nameInput.value, jobInput.value).then(() => {\r\n    stopLoader(evt.target);\r\n    profileTitle.textContent = nameInput.value;\r\n    profileDescription.textContent = jobInput.value;\r\n    closePopup(evt.target.closest(\".popup\"));\r\n  });\r\n}\r\n\r\n/**\r\n * функция довавления новой карточки\r\n */\r\nfunction handleNewCard(evt) {\r\n  evt.preventDefault();\r\n  addNewCard(newCardName.value, newCardJob.value).then((newElement) => {\r\n    const newCard = createCard(\r\n      newElement,\r\n      cardTemplate,\r\n      zoom,\r\n      myId,\r\n      processLike,\r\n      processDelete\r\n    );\r\n    cardsContainer.pepend(newCard);\r\n  });\r\n\r\n  formNewCard.reset();\r\n  clearValidation(editProfilePopup, validationConfig);\r\n  closePopup(evt.target.closest(\".popup\"));\r\n}\r\n\r\n/**\r\n * функция редактирования профиля\r\n */\r\nfunction fillProfile() {\r\n  nameInput.value = profileTitle.textContent;\r\n  jobInput.value = profileDescription.textContent;\r\n}\r\n\r\nbuttonProfileAddAvatar.addEventListener(\"click\", () => {\r\n  openPopup(popupTypeAvatar);\r\n  const form = popupTypeAvatar.querySelector(validationConfig.formSelector);\r\n  clearValidation(form, validationConfig);\r\n});\r\n\r\nfunction handleAvatarUpdate(evt) {\r\n  evt.preventDefault();\r\n  const newAvatarUrl = avatarInput.value;\r\n  sartLoader(evt.target);\r\n  updateAvatar(newAvatarUrl).then((profileData) => {\r\n    stopLoader(evt.target);\r\n    profileImage.style.backgroundImage = \"url(\" + profileData.avatar + \")\";\r\n    evt.target.reset();\r\n    closePopup(evt.target.closest(\".popup\"));\r\n  });\r\n}\r\n\r\nprofileAddButton.addEventListener(\"click\", () => {\r\n  openPopup(addPopup);\r\n  const form = addPopup.querySelector(validationConfig.formSelector);\r\n  clearValidation(form, validationConfig);\r\n});\r\n\r\neditButton.addEventListener(\"click\", () => {\r\n  openPopup(editProfilePopup);\r\n  fillProfile();\r\n  const form = editProfilePopup.querySelector(validationConfig.formSelector);\r\n  clearValidation(form, validationConfig);\r\n});\r\n\r\nPromise.all([getProfile(), getInitialCards()])\r\n  .then(([profileData, cards]) => {\r\n    profileTitle.textContent = profileData.name;\r\n    profileDescription.textContent = profileData.about;\r\n    profileImage.style.backgroundImage = \"url(\" + profileData.avatar + \")\";\r\n\r\n    myId = profileData._id;\r\n    cards.forEach((element) => {\r\n      const card = createCard(\r\n        element,\r\n        cardTemplate,\r\n        zoom,\r\n        myId,\r\n        processLike,\r\n        processDelete\r\n      );\r\n      cardsContainer.append(card);\r\n    });\r\n  })\r\n  .catch((err) => {\r\n    console.error(\"Произошла ошибка при загрузке данных:\", err);\r\n  });\r\n\r\nformEditProfile.addEventListener(\"submit\", handleFormSubmitEditProfile);\r\nformNewCard.addEventListener(\"submit\", handleNewCard);\r\navatarForm.addEventListener(\"submit\", handleAvatarUpdate);\r\n\r\nenableValidation(validationConfig);\r\n"],"names":["createCard","element","cardTemplate","zoom","myId","processLike","processDelete","cardElement","querySelector","cloneNode","imageElement","likeCountElement","textContent","likes","length","src","link","alt","name","cardId","_id","deleteButton","owner","addEventListener","remove","dataset","cartId","deleteCard","likeButton","classList","toggle","contains","then","handleLike","some","user","add","openPopup","popup","document","closePopupEsc","handleClosePopup","closePopup","removeEventListener","evt","key","target","closest","pattern","config","setValidationMessage","inputElement","message","span","nextElementSibling","errorClass","inputErrorClass","clearValidation","formElement","validationConfig","button","submitButtonSelector","disabled","inactiveButtonClass","Array","from","getElementsByClassName","forEach","baseUrl","headers","authorization","processResponse","res","ok","json","Promise","reject","concat","status","isLike","method","fetch","profileAddButton","editButton","formEditProfile","formNewCard","addPopup","editProfilePopup","cardsContainer","content","nameInput","jobInput","popupTypeImage","popupImage","popupCaptionImage","profileTitle","profileDescription","profileImage","newCardName","newCardJob","popupTypeAvatar","buttonProfileAddAvatar","avatarForm","avatarInput","formSelector","inputSelector","sartLoader","el","processing","label","stopLoader","value","all","_ref","_ref2","profileData","cards","about","style","backgroundImage","avatar","card","append","catch","err","console","error","preventDefault","body","JSON","stringify","newElement","newCard","pepend","reset","newAvatarUrl","querySelectorAll","isValid","validity","valid","validateSymbols","test","errorMessage","validationMessage","isInputValid","checkInputValidity","setEventListeners","enableValidation"],"sourceRoot":""}