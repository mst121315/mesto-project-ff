{"version":3,"file":"main.js","mappings":"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","sources":["webpack://mesto-project-ff/./src/components/card.js","webpack://mesto-project-ff/./src/components/modal.js","webpack://mesto-project-ff/./src/components/validation.js","webpack://mesto-project-ff/./src/components/api.js","webpack://mesto-project-ff/./src/index.js"],"sourcesContent":["function createCard(\r\n  element,\r\n  cardTemplate,\r\n  zoom,\r\n  myId,\r\n  processLike,\r\n  processDelete\r\n) {\r\n  const cardElement = cardTemplate\r\n    .querySelector(\".places__item\")\r\n    .cloneNode(true);\r\n  const imageElement = cardElement.querySelector(\".card__image\");\r\n  const likeCountElement = cardElement.querySelector(\".like-count\");\r\n\r\n  likeCountElement.textContent = element.likes.length;\r\n  imageElement.src = element.link;\r\n  imageElement.alt = element.name;\r\n  const cardId = element._id;\r\n\r\n  const cardTitle = cardElement.querySelector(\".card__title\");\r\n  cardTitle.textContent = element.name;\r\n\r\n  const deleteButton = cardElement.querySelector(\".card__delete-button\");\r\n  if (element.owner._id == myId) {\r\n    deleteButton.addEventListener(\"click\", () =>\r\n      deleteCard(cardElement, processDelete, cardId)\r\n    );\r\n  } else {\r\n    deleteButton.remove();\r\n  }\r\n\r\n  const likeButton = cardElement.querySelector(\".card__like-button\"); // лайк\r\n  likeButton.addEventListener(\"click\", () =>\r\n    handleLike(likeButton, processLike, likeCountElement, cardId)\r\n  );\r\n  if (element.likes.some((user) => user._id === myId)) {\r\n    likeButton.classList.add(\"card__like-button_is-active\");\r\n  }\r\n\r\n  imageElement.addEventListener(\"click\", () => zoom(element)); // zoom\r\n\r\n  return cardElement;\r\n}\r\n\r\nfunction deleteCard(cardElement, processDelete, cardId) {\r\n  processDelete(cardId)\r\n    .then(() => cardElement.remove())\r\n    .catch((err) => {\r\n      console.error(\"Произошла ошибка при загрузке данных:\", err);\r\n    });\r\n}\r\n\r\nfunction handleLike(likeButton, processLike, likeCountElement, cardId) {\r\n  processLike(\r\n    !likeButton.classList.contains(\"card__like-button_is-active\"),\r\n    cardId\r\n  )\r\n    .then((element) => {\r\n      likeButton.classList.toggle(\"card__like-button_is-active\");\r\n      likeCountElement.textContent = element.likes.length;\r\n    })\r\n    .catch((err) => {\r\n      console.error(\"Произошла ошибка при загрузке данных:\", err);\r\n    });\r\n}\r\n\r\nexport { createCard };\r\n","/**\r\n * функция открытия попапа новой карточки\r\n */\r\nfunction openPopup(popup) {\r\n  popup.classList.add(\"popup_is-opened\");\r\n\r\n  document.addEventListener(\"keydown\", closePopupEsc);\r\n  popup.addEventListener(\"click\", handleClosePopup);\r\n}\r\n\r\n/**\r\n * колбэк функция закрытия попапа \r\n */\r\nfunction closePopup(popup) {\r\n  popup.classList.remove(\"popup_is-opened\");\r\n\r\n  document.removeEventListener(\"keydown\", closePopupEsc);\r\n  popup.removeEventListener(\"click\", handleClosePopup);\r\n}\r\n\r\n/**\r\n * закрытие кнопкой Esc\r\n */\r\nfunction closePopupEsc(evt) {\r\n  if (evt.key === \"Escape\") {\r\n    const popup = document.querySelector(\".popup_is-opened\");\r\n    if (popup) {\r\n      closePopup(popup);\r\n    }\r\n  }\r\n}\r\n\r\nfunction handleClosePopup(evt) {\r\n  if (evt.target.classList.contains(\"popup\")) {\r\n    /** закрытие по оверлею */ \r\n    closePopup(evt.target);\r\n  }\r\n  if (evt.target.classList.contains(\"popup__close\")) {\r\n    /** закрытие по крестику */\r\n    closePopup(evt.target.closest(\".popup\"));\r\n  }\r\n}\r\n\r\nexport { openPopup };\r\nexport { closePopup };\r\n","function setEventListeners(formElement, config) {\r\n  const popupInputs = formElement.querySelectorAll(config.inputSelector);\r\n  const button = formElement.querySelector(config.submitButtonSelector);\r\n\r\n  popupInputs.forEach((inputElement) => {\r\n    const elementError = formElement.querySelector(`.${inputElement.id}-error`);\r\n    inputElement.addEventListener(\"input\", function () {\r\n      isValid(inputElement, elementError, config);\r\n\r\n      toggleButtonState(popupInputs, button, config);\r\n    });\r\n  });\r\n\r\n  toggleButtonState(popupInputs, button, config);\r\n}\r\n\r\nfunction isValid(inputElement, elementError, config) {\r\n  if (inputElement.validity.patternMismatch) {\r\n    inputElement.setCustomValidity(inputElement.dataset.errorMessage);\r\n  } else {\r\n    inputElement.setCustomValidity(\"\");\r\n  }\r\n\r\n  if (!inputElement.validity.valid) {\r\n    showInputError(elementError, config, inputElement.validationMessage);\r\n    inputElement.classList.add(config.inputErrorClass);\r\n  } else {\r\n    hideInputError(elementError, config);\r\n    inputElement.classList.remove(config.inputErrorClass);\r\n  }\r\n}\r\n\r\nfunction toggleButtonState(popupInputs, button, config) {\r\n  if (hasInvalidInput(popupInputs)) {\r\n    disableButton(button, config);\r\n  } else {\r\n    enableButton(button, config);\r\n  }\r\n}\r\n\r\nfunction disableButton(button, config) {\r\n  button.disabled = true;\r\n  button.classList.add(config.inactiveButtonClass);\r\n}\r\n\r\nfunction enableButton(button, config) {\r\n  button.disabled = false;\r\n  button.classList.remove(config.inactiveButtonClass);\r\n}\r\n\r\nfunction hasInvalidInput(inputList) {\r\n  return Array.from(inputList).some((inputElement) => {\r\n    return !inputElement.validity.valid;\r\n  });\r\n}\r\n\r\nfunction showInputError(elementError, config, validationMessage) {\r\n  elementError.textContent = validationMessage;\r\n  elementError.classList.add(config.errorClass);\r\n}\r\n\r\nfunction hideInputError(elementError, config) {\r\n  elementError.textContent = \"\";\r\n  elementError.classList.remove(config.errorClass);\r\n}\r\n\r\nexport function enableValidation(config) {\r\n  /** включение валидации всех форм */\r\n  const popupForms = document.querySelectorAll(config.formSelector);\r\n  popupForms.forEach((formElement) => {\r\n    setEventListeners(formElement, config);\r\n  });\r\n}\r\n\r\nexport function clearValidation(formElement, config) {\r\n  /** очищает ошибки валидации формы и делает кнопку неактивной */\r\n  const button = formElement.querySelector(config.submitButtonSelector);\r\n  disableButton(button, config);\r\n\r\n  const popupInputs = formElement.querySelectorAll(config.inputSelector);\r\n  popupInputs.forEach((inputElement) => {\r\n    inputElement.classList.remove(config.inputErrorClass);\r\n    const spanElement = formElement.querySelector(`.${inputElement.id}-error`);\r\n    hideInputError(spanElement, config);\r\n  });\r\n}\r\n","const config = {\r\n  baseUrl: \"https://nomoreparties.co/v1/wff-cohort-36\",\r\n  headers: {\r\n    authorization: \"85ed03d0-3030-4aec-8d2c-4308658bc7d8\",\r\n    \"Content-Type\": \"application/json\",\r\n  },\r\n};\r\n\r\nfunction processResponse(res) {\r\n  if (res.ok) {\r\n    return res.json();\r\n  }\r\n  return Promise.reject(`Ошибка: ${res.status}`);\r\n}\r\n\r\nexport const getInitialCards = () => {\r\n  return fetch(`${config.baseUrl}/cards`, {\r\n    headers: config.headers,\r\n  }).then((res) => processResponse(res));\r\n};\r\n\r\nexport const getProfile = () => {\r\n  return fetch(`${config.baseUrl}/users/me`, {\r\n    method: \"GET\",\r\n    headers: config.headers,\r\n  }).then((res) => processResponse(res));\r\n};\r\n\r\nexport const updateProfile = (name, about) => {\r\n  return fetch(`${config.baseUrl}/users/me`, {\r\n    method: \"PATCH\",\r\n    headers: config.headers,\r\n    body: JSON.stringify({\r\n      name: name,\r\n      about: about,\r\n    }),\r\n  }).then((res) => processResponse(res));\r\n};\r\n\r\nexport const addNewCard = (name, link) => {\r\n  return fetch(`${config.baseUrl}/cards`, {\r\n    method: \"POST\",\r\n    headers: config.headers,\r\n    body: JSON.stringify({\r\n      name: name,\r\n      link: link,\r\n    }),\r\n  }).then((res) => processResponse(res));\r\n};\r\n\r\nexport const processLike = (isLike, cardId) => {\r\n  const method = isLike ? \"PUT\" : \"DELETE\";\r\n  return fetch(`${config.baseUrl}/cards/likes/${cardId}`, {\r\n    method: method,\r\n    headers: config.headers,\r\n  }).then((res) => processResponse(res));\r\n};\r\n\r\nexport const processDelete = (cardId) => {\r\n  return fetch(`${config.baseUrl}/cards/${cardId}`, {\r\n    method: \"DELETE\",\r\n    headers: config.headers,\r\n  }).then((res) => processResponse(res));\r\n};\r\n\r\nexport const updateAvatar = (avatar) => {\r\n  return fetch(`${config.baseUrl}/users/me/avatar`, {\r\n    method: \"PATCH\",\r\n    headers: config.headers,\r\n    body: JSON.stringify({\r\n      avatar: avatar,\r\n    }),\r\n  }).then((res) => processResponse(res));\r\n};\r\n","import \"./pages/index.css\";\r\n\r\nimport { createCard } from \"./components/card.js\";\r\nimport { openPopup } from \"./components/modal.js\";\r\nimport { closePopup } from \"./components/modal.js\";\r\n\r\nimport { clearValidation } from \"./components/validation.js\";\r\nimport { enableValidation } from \"./components/validation.js\";\r\n\r\nimport {\r\n  getInitialCards,\r\n  getProfile,\r\n  updateProfile,\r\n  addNewCard,\r\n  processLike,\r\n  processDelete,\r\n  updateAvatar,\r\n} from \"./components/api.js\";\r\n\r\nlet myId = null;\r\n\r\nconst profileAddButton = document.querySelector(\".profile__add-button\"); // кнопка +\r\nconst editButton = document.querySelector(\".profile__edit-button\"); // кнопка редактировать профиль\r\nconst formEditProfile = document.querySelector(\"#edit-profile-form\");\r\nconst formNewCard = document.querySelector(\"#new-card-form\");\r\n\r\nconst addPopup = document.querySelector(\".popup_type_new-card\"); // попап новой карточки\r\nconst editProfilePopup = document.querySelector(\".popup_type_edit\"); // попап редактирования профиля\r\n\r\nconst cardsContainer = document.querySelector(\".places__list\");\r\n\r\n/** Темплейт карточки */\r\nconst cardTemplate = document.querySelector(\"#card-template\").content;\r\n\r\nconst nameInput = document.querySelector(\".popup__input_type_name\");\r\nconst jobInput = document.querySelector(\".popup__input_type_description\");\r\n\r\nconst popupTypeImage = document.querySelector(\".popup_type_image\");\r\nconst popupImage = popupTypeImage.querySelector(\".popup__image\");\r\nconst popupCaptionImage = popupTypeImage.querySelector(\".popup__caption\");\r\n\r\nconst profileTitle = document.querySelector(\".profile__title\");\r\nconst profileDescription = document.querySelector(\".profile__description\");\r\n\r\nconst profileImage = document.querySelector(\".profile__image\");\r\n\r\nconst newCardName = document.querySelector(\"#place-name\");\r\nconst newCardJob = document.querySelector(\"#link\");\r\n\r\n/** Аватар */\r\nconst popupTypeAvatar = document.querySelector(\".popup_type_avatar\");\r\nconst buttonProfileAddAvatar = document.querySelector(\".profile__add-avatar\");\r\nconst avatarForm = document.querySelector(\"#avatar-form\");\r\nconst avatarInput = avatarForm.querySelector(\"#avatar-url\");\r\n\r\nconst validationConfig = {\r\n  formSelector: \".popup__form\",\r\n  inputSelector: \".popup__input\",\r\n  submitButtonSelector: \".popup__button\",\r\n  inactiveButtonClass: \"popup__button_disabled\",\r\n  inputErrorClass: \"popup__input_type_error\",\r\n  errorClass: \"popup__error_visible\",\r\n};\r\n\r\n/**\r\n * функция увеличения картинки карточки\r\n */\r\nfunction zoom(element) {\r\n  openPopup(popupTypeImage);\r\n\r\n  popupImage.src = element.link;\r\n  popupImage.alt = element.name;\r\n  popupCaptionImage.textContent = element.name;\r\n}\r\n\r\nfunction startLoader(el) {\r\n  const button = el.querySelector(\".popup__button\");\r\n  if (button.dataset.processing) {\r\n    button.disabled = true;\r\n    button.dataset.label = button.textContent;\r\n    button.textContent = button.dataset.processing;\r\n  }\r\n}\r\n\r\nfunction stopLoader(el) {\r\n  const button = el.querySelector(\".popup__button\");\r\n  if (button.dataset.processing) {\r\n    button.disabled = false;\r\n    button.dataset.processing = button.textContent;\r\n    button.textContent = button.dataset.label;\r\n  }\r\n}\r\n\r\n/**\r\n * Обработчик «отправки» формы\r\n */\r\nfunction handleFormSubmitEditProfile(evt) {\r\n  evt.preventDefault();\r\n  startLoader(evt.target);\r\n  updateProfile(nameInput.value, jobInput.value)\r\n    .then((profile) => {\r\n      profileTitle.textContent = profile.name;\r\n      profileDescription.textContent = profile.about;\r\n      closePopup(editProfilePopup);\r\n    })\r\n    .catch((err) => {\r\n      console.error(\"Произошла ошибка при загрузке данных:\", err);\r\n    })\r\n    .finally(() => stopLoader(evt.target));\r\n}\r\n\r\n/**\r\n * функция довавления новой карточки\r\n */\r\nfunction handleNewCard(evt) {\r\n  evt.preventDefault();\r\n  startLoader(evt.target);\r\n  addNewCard(newCardName.value, newCardJob.value)\r\n    .then((newElement) => {\r\n      const newCard = createCard(\r\n        newElement,\r\n        cardTemplate,\r\n        zoom,\r\n        myId,\r\n        processLike,\r\n        processDelete\r\n      );\r\n      cardsContainer.prepend(newCard);\r\n      closePopup(addPopup);\r\n    })\r\n    .catch((err) => {\r\n      console.error(\"Произошла ошибка при загрузке данных:\", err);\r\n    }).finally(() => stopLoader(evt.target));;\r\n}\r\n\r\n/**\r\n * функция редактирования профиля\r\n */\r\nfunction fillProfile() {\r\n  nameInput.value = profileTitle.textContent;\r\n  jobInput.value = profileDescription.textContent;\r\n}\r\n\r\nfunction handleAvatarUpdate(evt) {\r\n  evt.preventDefault();\r\n  const newAvatarUrl = avatarInput.value;\r\n  startLoader(evt.target);\r\n  updateAvatar(newAvatarUrl)\r\n    .then((profileData) => {\r\n      profileImage.style.backgroundImage = \"url(\" + profileData.avatar + \")\";\r\n      closePopup(popupTypeAvatar);\r\n    })\r\n    .catch((err) => {\r\n      console.error(\"Произошла ошибка при загрузке данных:\", err);\r\n    })\r\n    .finally(() => stopLoader(evt.target));\r\n}\r\n\r\nbuttonProfileAddAvatar.addEventListener(\"click\", () => {\r\n  openPopup(popupTypeAvatar);\r\n  avatarForm.reset();\r\n  clearValidation(avatarForm, validationConfig);\r\n});\r\n\r\nprofileAddButton.addEventListener(\"click\", () => {\r\n  openPopup(addPopup);\r\n  formNewCard.reset();\r\n  clearValidation(formNewCard, validationConfig);\r\n});\r\n\r\neditButton.addEventListener(\"click\", () => {\r\n  openPopup(editProfilePopup);\r\n  fillProfile();\r\n  clearValidation(formEditProfile, validationConfig);\r\n});\r\n\r\nPromise.all([getProfile(), getInitialCards()])\r\n  .then(([profileData, cards]) => {\r\n    profileTitle.textContent = profileData.name;\r\n    profileDescription.textContent = profileData.about;\r\n    profileImage.style.backgroundImage = \"url(\" + profileData.avatar + \")\";\r\n\r\n    myId = profileData._id;\r\n    cards.forEach((element) => {\r\n      const card = createCard(\r\n        element,\r\n        cardTemplate,\r\n        zoom,\r\n        myId,\r\n        processLike,\r\n        processDelete\r\n      );\r\n      cardsContainer.append(card);\r\n    });\r\n  })\r\n  .catch((err) => {\r\n    console.error(\"Произошла ошибка при загрузке данных:\", err);\r\n  });\r\n\r\nformEditProfile.addEventListener(\"submit\", handleFormSubmitEditProfile);\r\nformNewCard.addEventListener(\"submit\", handleNewCard);\r\navatarForm.addEventListener(\"submit\", handleAvatarUpdate);\r\n\r\nenableValidation(validationConfig);\r\n"],"names":["createCard","element","cardTemplate","zoom","myId","processLike","processDelete","cardElement","querySelector","cloneNode","imageElement","likeCountElement","textContent","likes","length","src","link","alt","name","cardId","_id","deleteButton","owner","addEventListener","then","remove","catch","err","console","error","deleteCard","likeButton","classList","contains","toggle","handleLike","some","user","add","openPopup","popup","document","closePopupEsc","handleClosePopup","closePopup","removeEventListener","evt","key","target","closest","toggleButtonState","popupInputs","button","config","inputList","Array","from","inputElement","validity","valid","disableButton","disabled","inactiveButtonClass","enableButton","hideInputError","elementError","errorClass","clearValidation","formElement","submitButtonSelector","querySelectorAll","inputSelector","forEach","inputErrorClass","concat","id","baseUrl","headers","authorization","processResponse","res","ok","json","Promise","reject","status","isLike","method","fetch","profileAddButton","editButton","formEditProfile","formNewCard","addPopup","editProfilePopup","cardsContainer","content","nameInput","jobInput","popupTypeImage","popupImage","popupCaptionImage","profileTitle","profileDescription","profileImage","newCardName","newCardJob","popupTypeAvatar","buttonProfileAddAvatar","avatarForm","avatarInput","validationConfig","formSelector","startLoader","el","dataset","processing","label","stopLoader","reset","value","all","_ref","_ref2","profileData","cards","about","style","backgroundImage","avatar","card","append","preventDefault","body","JSON","stringify","profile","finally","newElement","newCard","prepend","newAvatarUrl","patternMismatch","setCustomValidity","errorMessage","validationMessage","showInputError","isValid","setEventListeners","enableValidation"],"sourceRoot":""}