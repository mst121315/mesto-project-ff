{"version":3,"file":"main.js","mappings":"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","sources":["webpack://mesto-project-ff/./src/components/card.js","webpack://mesto-project-ff/./src/components/modal.js","webpack://mesto-project-ff/./src/components/validation.js","webpack://mesto-project-ff/./src/components/api.js","webpack://mesto-project-ff/./src/index.js"],"sourcesContent":["function createCard(\r\n  element,\r\n  cardTemplate,\r\n  zoom,\r\n  myId,\r\n  processLike,\r\n  processDelete\r\n) {\r\n  const cardElement = cardTemplate\r\n    .querySelector(\".places__item\")\r\n    .cloneNode(true);\r\n  const imageElement = cardElement.querySelector(\".card__image\");\r\n  const likeCountElement = cardElement.querySelector(\".like-count\");\r\n\r\n  likeCountElement.textContent = element.likes.length;\r\n  imageElement.src = element.link;\r\n  imageElement.alt = element.name;\r\n  const cardId = element._id;\r\n\r\n  const cardTitle = cardElement.querySelector(\".card__title\");\r\n  cardTitle.textContent = element.name;\r\n\r\n  const deleteButton = cardElement.querySelector(\".card__delete-button\");\r\n  if (element.owner._id == myId) {\r\n    deleteButton.addEventListener(\"click\", () =>\r\n      deleteCard(cardElement, processDelete, cardId)\r\n    );\r\n  } else {\r\n    deleteButton.remove();\r\n  }\r\n\r\n  const likeButton = cardElement.querySelector(\".card__like-button\"); // лайк\r\n  likeButton.addEventListener(\"click\", () =>\r\n    handleLike(likeButton, processLike, likeCountElement, cardId)\r\n  );\r\n  if (element.likes.some((user) => user._id === myId)) {\r\n    likeButton.classList.add(\"card__like-button_is-active\");\r\n  }\r\n\r\n  imageElement.addEventListener(\"click\", () => zoom(element)); // zoom\r\n\r\n  return cardElement;\r\n}\r\n\r\nfunction deleteCard(cardElement, processDelete, cardId) {\r\n  processDelete(cardId)\r\n    .then(() => cardElement.remove())\r\n    .catch((err) => {\r\n      console.error(\"Произошла ошибка при загрузке данных:\", err);\r\n    });\r\n}\r\n\r\nfunction handleLike(likeButton, processLike, likeCountElement, cardId) {\r\n  processLike(\r\n    !likeButton.classList.contains(\"card__like-button_is-active\"),\r\n    cardId\r\n  )\r\n    .then((element) => {\r\n      likeButton.classList.toggle(\"card__like-button_is-active\");\r\n      likeCountElement.textContent = element.likes.length;\r\n    })\r\n    .catch((err) => {\r\n      console.error(\"Произошла ошибка при загрузке данных:\", err);\r\n    });\r\n}\r\n\r\nexport { createCard };\r\n","/**\r\n * функция открытия попапа новой карточки\r\n */\r\nfunction openPopup(popup) {\r\n  popup.classList.add(\"popup_is-opened\");\r\n\r\n  document.addEventListener(\"keydown\", closePopupEsc);\r\n  popup.addEventListener(\"click\", handleClosePopup);\r\n}\r\n\r\n/**\r\n * колбэк функция закрытия попапа \r\n */\r\nfunction closePopup(popup) {\r\n  popup.classList.remove(\"popup_is-opened\");\r\n\r\n  document.removeEventListener(\"keydown\", closePopupEsc);\r\n  popup.removeEventListener(\"click\", handleClosePopup);\r\n}\r\n\r\n/**\r\n * закрытие кнопкой Esc\r\n */\r\nfunction closePopupEsc(evt) {\r\n  if (evt.key === \"Escape\") {\r\n    const popup = document.querySelector(\".popup_is-opened\");\r\n    if (popup) {\r\n      closePopup(popup);\r\n    }\r\n  }\r\n}\r\n\r\nfunction handleClosePopup(evt) {\r\n  if (evt.target.classList.contains(\"popup\")) {\r\n    /** закрытие по оверлею */ \r\n    closePopup(evt.target);\r\n  }\r\n  if (evt.target.classList.contains(\"popup__close\")) {\r\n    /** закрытие по крестику */\r\n    closePopup(evt.target.closest(\".popup\"));\r\n  }\r\n}\r\n\r\nexport { openPopup };\r\nexport { closePopup };\r\n","function setEventListeners(formElement, config) {\r\n  const popupInputs = formElement.querySelectorAll(config.inputSelector);\r\n  const button = formElement.querySelector(config.submitButtonSelector);\r\n\r\n  popupInputs.forEach((inputElement) => {\r\n    const elementError = formElement.querySelector(`.${inputElement.id}-error`);\r\n    inputElement.addEventListener(\"input\", function () {\r\n      isValid(inputElement, elementError, config);\r\n\r\n      toggleButtonState(popupInputs, button, config);\r\n    });\r\n  });\r\n\r\n  toggleButtonState(popupInputs, button, config);\r\n}\r\n\r\nfunction isValid(inputElement, elementError, config) {\r\n  if (inputElement.validity.patternMismatch) {\r\n    inputElement.setCustomValidity(inputElement.dataset.errorMessage);\r\n  } else {\r\n    inputElement.setCustomValidity(\"\");\r\n  }\r\n\r\n  if (!inputElement.validity.valid) {\r\n    showInputError(elementError, config, inputElement.validationMessage);\r\n    inputElement.classList.add(config.inputErrorClass);\r\n  } else {\r\n    hideInputError(elementError, config);\r\n    inputElement.classList.remove(config.inputErrorClass);\r\n  }\r\n}\r\n\r\nfunction toggleButtonState(popupInputs, button, config) {\r\n  if (hasInvalidInput(popupInputs)) {\r\n    enableButton(button, config);\r\n  } else {\r\n    dsableButton(button, config);\r\n  }\r\n}\r\n\r\nfunction enableButton(button, config) {\r\n  button.disabled = true;\r\n  button.classList.add(config.inactiveButtonClass);\r\n}\r\n\r\nfunction dsableButton(button, config) {\r\n  button.disabled = false;\r\n  button.classList.remove(config.inactiveButtonClass);\r\n}\r\n\r\nfunction hasInvalidInput(inputList) {\r\n  return Array.from(inputList).some((inputElement) => {\r\n    return !inputElement.validity.valid;\r\n  });\r\n}\r\n\r\nfunction showInputError(elementError, config, validationMessage) {\r\n  elementError.textContent = validationMessage;\r\n  elementError.classList.add(config.errorClass);\r\n}\r\n\r\nfunction hideInputError(elementError, config) {\r\n  elementError.textContent = \"\";\r\n  elementError.classList.remove(config.errorClass);\r\n}\r\n\r\nexport function enableValidation(config) {\r\n  /** включение валидации всех форм */\r\n  const popupForms = document.querySelectorAll(config.formSelector);\r\n  popupForms.forEach((formElement) => {\r\n    setEventListeners(formElement, config);\r\n  });\r\n}\r\n\r\nexport function clearValidation(formElement, config) {\r\n  /** очищает ошибки валидации формы и делает кнопку неактивной */\r\n  const button = formElement.querySelector(config.submitButtonSelector);\r\n  dsableButton(button, config);\r\n\r\n  const spanElements = Array.from(\r\n    formElement.getElementsByClassName(config.errorClass)\r\n  );\r\n  spanElements.forEach((span) => hideInputError(span, config));\r\n\r\n  const popupInputs = formElement.querySelectorAll(config.inputSelector);\r\n  popupInputs.forEach((inputElement) =>\r\n    inputElement.classList.remove(config.inputErrorClass)\r\n  );\r\n}\r\n","const config = {\r\n  baseUrl: \"https://nomoreparties.co/v1/wff-cohort-36\",\r\n  headers: {\r\n    authorization: \"85ed03d0-3030-4aec-8d2c-4308658bc7d8\",\r\n    \"Content-Type\": \"application/json\",\r\n  },\r\n};\r\n\r\nfunction processResponse(res) {\r\n  if (res.ok) {\r\n    return res.json();\r\n  }\r\n  return Promise.reject(`Ошибка: ${res.status}`);\r\n}\r\n\r\nexport const getInitialCards = () => {\r\n  return fetch(`${config.baseUrl}/cards`, {\r\n    headers: config.headers,\r\n  }).then((res) => processResponse(res));\r\n};\r\n\r\nexport const getProfile = () => {\r\n  return fetch(`${config.baseUrl}/users/me`, {\r\n    method: \"GET\",\r\n    headers: config.headers,\r\n  }).then((res) => processResponse(res));\r\n};\r\n\r\nexport const updateProfile = (name, about) => {\r\n  return fetch(`${config.baseUrl}/users/me`, {\r\n    method: \"PATCH\",\r\n    headers: config.headers,\r\n    body: JSON.stringify({\r\n      name: name,\r\n      about: about,\r\n    }),\r\n  }).then((res) => processResponse(res));\r\n};\r\n\r\nexport const addNewCard = (name, link) => {\r\n  return fetch(`${config.baseUrl}/cards`, {\r\n    method: \"POST\",\r\n    headers: config.headers,\r\n    body: JSON.stringify({\r\n      name: name,\r\n      link: link,\r\n    }),\r\n  }).then((res) => processResponse(res));\r\n};\r\n\r\nexport const processLike = (isLike, cardId) => {\r\n  const method = isLike ? \"PUT\" : \"DELETE\";\r\n  return fetch(`${config.baseUrl}/cards/likes/${cardId}`, {\r\n    method: method,\r\n    headers: config.headers,\r\n  }).then((res) => processResponse(res));\r\n};\r\n\r\nexport const processDelete = (cardId) => {\r\n  return fetch(`${config.baseUrl}/cards/${cardId}`, {\r\n    method: \"DELETE\",\r\n    headers: config.headers,\r\n  }).then((res) => processResponse(res));\r\n};\r\n\r\nexport const updateAvatar = (avatar) => {\r\n  return fetch(`${config.baseUrl}/users/me/avatar`, {\r\n    method: \"PATCH\",\r\n    headers: config.headers,\r\n    body: JSON.stringify({\r\n      avatar: avatar,\r\n    }),\r\n  }).then((res) => processResponse(res));\r\n};\r\n","import \"./pages/index.css\";\r\n\r\nimport { createCard } from \"./components/card.js\";\r\nimport { openPopup } from \"./components/modal.js\";\r\nimport { closePopup } from \"./components/modal.js\";\r\n\r\nimport { clearValidation } from \"./components/validation.js\";\r\nimport { enableValidation } from \"./components/validation.js\";\r\n\r\nimport {\r\n  getInitialCards,\r\n  getProfile,\r\n  updateProfile,\r\n  addNewCard,\r\n  processLike,\r\n  processDelete,\r\n  updateAvatar,\r\n} from \"./components/api.js\";\r\n\r\nlet myId = null;\r\n\r\nconst profileAddButton = document.querySelector(\".profile__add-button\"); // кнопка +\r\nconst editButton = document.querySelector(\".profile__edit-button\"); // кнопка редактировать профиль\r\nconst formEditProfile = document.querySelector(\"#edit-profile-form\");\r\nconst formNewCard = document.querySelector(\"#new-card-form\");\r\n\r\nconst addPopup = document.querySelector(\".popup_type_new-card\"); // попап новой карточки\r\nconst editProfilePopup = document.querySelector(\".popup_type_edit\"); // попап редактирования профиля\r\n\r\nconst cardsContainer = document.querySelector(\".places__list\");\r\n\r\n/** Темплейт карточки */\r\nconst cardTemplate = document.querySelector(\"#card-template\").content;\r\n\r\nconst nameInput = document.querySelector(\".popup__input_type_name\");\r\nconst jobInput = document.querySelector(\".popup__input_type_description\");\r\n\r\nconst popupTypeImage = document.querySelector(\".popup_type_image\");\r\nconst popupImage = popupTypeImage.querySelector(\".popup__image\");\r\nconst popupCaptionImage = popupTypeImage.querySelector(\".popup__caption\");\r\n\r\nconst profileTitle = document.querySelector(\".profile__title\");\r\nconst profileDescription = document.querySelector(\".profile__description\");\r\n\r\nconst profileImage = document.querySelector(\".profile__image\");\r\n\r\nconst newCardName = document.querySelector(\"#place-name\");\r\nconst newCardJob = document.querySelector(\"#link\");\r\n\r\n/** Аватар */\r\nconst popupTypeAvatar = document.querySelector(\".popup_type_avatar\");\r\nconst buttonProfileAddAvatar = document.querySelector(\".profile__add-avatar\");\r\nconst avatarForm = document.querySelector(\"#avatar-form\");\r\nconst avatarInput = avatarForm.querySelector(\"#avatar-url\");\r\n\r\nconst validationConfig = {\r\n  formSelector: \".popup__form\",\r\n  inputSelector: \".popup__input\",\r\n  submitButtonSelector: \".popup__button\",\r\n  inactiveButtonClass: \"popup__button_disabled\",\r\n  inputErrorClass: \"popup__input_type_error\",\r\n  errorClass: \"popup__error_visible\",\r\n};\r\n\r\n/**\r\n * функция увеличения картинки карточки\r\n */\r\nfunction zoom(element) {\r\n  openPopup(popupTypeImage);\r\n\r\n  popupImage.src = element.link;\r\n  popupImage.alt = element.name;\r\n  popupCaptionImage.textContent = element.name;\r\n}\r\n\r\nfunction startLoader(el) {\r\n  const button = el.querySelector(\".popup__button\");\r\n  if (button.dataset.processing) {\r\n    button.disabled = true;\r\n    button.dataset.label = button.textContent;\r\n    button.textContent = button.dataset.processing;\r\n  }\r\n}\r\n\r\nfunction stopLoader(el) {\r\n  const button = el.querySelector(\".popup__button\");\r\n  if (button.dataset.processing) {\r\n    button.disabled = false;\r\n    button.dataset.processing = button.textContent;\r\n    button.textContent = button.dataset.label;\r\n  }\r\n}\r\n\r\n/**\r\n * Обработчик «отправки» формы\r\n */\r\nfunction handleFormSubmitEditProfile(evt) {\r\n  evt.preventDefault();\r\n  startLoader(evt.target);\r\n  updateProfile(nameInput.value, jobInput.value)\r\n    .then(() => {\r\n      profileTitle.textContent = nameInput.value;\r\n      profileDescription.textContent = jobInput.value;\r\n      closePopup(editProfilePopup);\r\n    })\r\n    .catch((err) => {\r\n      console.error(\"Произошла ошибка при загрузке данных:\", err);\r\n    })\r\n    .finally(() => stopLoader(evt.target));\r\n}\r\n\r\n/**\r\n * функция довавления новой карточки\r\n */\r\nfunction handleNewCard(evt) {\r\n  evt.preventDefault();\r\n  addNewCard(newCardName.value, newCardJob.value)\r\n    .then((newElement) => {\r\n      const newCard = createCard(\r\n        newElement,\r\n        cardTemplate,\r\n        zoom,\r\n        myId,\r\n        processLike,\r\n        processDelete\r\n      );\r\n      cardsContainer.prepend(newCard);\r\n    })\r\n    .catch((err) => {\r\n      console.error(\"Произошла ошибка при загрузке данных:\", err);\r\n    });\r\n  closePopup(addPopup);\r\n}\r\n\r\n/**\r\n * функция редактирования профиля\r\n */\r\nfunction fillProfile() {\r\n  nameInput.value = profileTitle.textContent;\r\n  jobInput.value = profileDescription.textContent;\r\n}\r\n\r\nfunction handleAvatarUpdate(evt) {\r\n  evt.preventDefault();\r\n  const newAvatarUrl = avatarInput.value;\r\n  startLoader(evt.target);\r\n  updateAvatar(newAvatarUrl)\r\n    .then((profileData) => {\r\n      profileImage.style.backgroundImage = \"url(\" + profileData.avatar + \")\";\r\n      closePopup(evt.target.closest(\".popup\"));\r\n    })\r\n    .catch((err) => {\r\n      console.error(\"Произошла ошибка при загрузке данных:\", err);\r\n    })\r\n    .finally(() => stopLoader(evt.target));\r\n}\r\n\r\nbuttonProfileAddAvatar.addEventListener(\"click\", () => {\r\n  openPopup(popupTypeAvatar);\r\n  avatarForm.reset();\r\n  clearValidation(avatarForm, validationConfig);\r\n});\r\n\r\nprofileAddButton.addEventListener(\"click\", () => {\r\n  openPopup(addPopup);\r\n  formNewCard.reset();\r\n  clearValidation(formNewCard, validationConfig);\r\n});\r\n\r\neditButton.addEventListener(\"click\", () => {\r\n  openPopup(editProfilePopup);\r\n  fillProfile();\r\n  clearValidation(formEditProfile, validationConfig);\r\n});\r\n\r\nPromise.all([getProfile(), getInitialCards()])\r\n  .then(([profileData, cards]) => {\r\n    profileTitle.textContent = profileData.name;\r\n    profileDescription.textContent = profileData.about;\r\n    profileImage.style.backgroundImage = \"url(\" + profileData.avatar + \")\";\r\n\r\n    myId = profileData._id;\r\n    cards.forEach((element) => {\r\n      const card = createCard(\r\n        element,\r\n        cardTemplate,\r\n        zoom,\r\n        myId,\r\n        processLike,\r\n        processDelete\r\n      );\r\n      cardsContainer.append(card);\r\n    });\r\n  })\r\n  .catch((err) => {\r\n    console.error(\"Произошла ошибка при загрузке данных:\", err);\r\n  });\r\n\r\nformEditProfile.addEventListener(\"submit\", handleFormSubmitEditProfile);\r\nformNewCard.addEventListener(\"submit\", handleNewCard);\r\navatarForm.addEventListener(\"submit\", handleAvatarUpdate);\r\n\r\nenableValidation(validationConfig);\r\n"],"names":["createCard","element","cardTemplate","zoom","myId","processLike","processDelete","cardElement","querySelector","cloneNode","imageElement","likeCountElement","textContent","likes","length","src","link","alt","name","cardId","_id","deleteButton","owner","addEventListener","then","remove","catch","err","console","error","deleteCard","likeButton","classList","contains","toggle","handleLike","some","user","add","openPopup","popup","document","closePopupEsc","handleClosePopup","closePopup","removeEventListener","evt","key","target","closest","toggleButtonState","popupInputs","button","config","inputList","Array","from","inputElement","validity","valid","disabled","inactiveButtonClass","enableButton","dsableButton","hideInputError","elementError","errorClass","clearValidation","formElement","submitButtonSelector","getElementsByClassName","forEach","span","querySelectorAll","inputSelector","inputErrorClass","baseUrl","headers","authorization","processResponse","res","ok","json","Promise","reject","concat","status","isLike","method","fetch","profileAddButton","editButton","formEditProfile","formNewCard","addPopup","editProfilePopup","cardsContainer","content","nameInput","jobInput","popupTypeImage","popupImage","popupCaptionImage","profileTitle","profileDescription","profileImage","newCardName","newCardJob","popupTypeAvatar","buttonProfileAddAvatar","avatarForm","avatarInput","validationConfig","formSelector","startLoader","el","dataset","processing","label","stopLoader","reset","value","all","_ref","_ref2","profileData","cards","about","style","backgroundImage","avatar","card","append","preventDefault","body","JSON","stringify","finally","newElement","newCard","prepend","newAvatarUrl","id","patternMismatch","setCustomValidity","errorMessage","validationMessage","showInputError","isValid","setEventListeners","enableValidation"],"sourceRoot":""}